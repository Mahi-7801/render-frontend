packages:
  yum:
    # Install MariaDB development headers (more reliable than MySQL on Amazon Linux 2023)
    mariadb-devel: []
    # Alternative MySQL development headers
    mysql-community-devel: []
    # Additional dependencies that might be needed
    python3-devel: []
    gcc: []
    gcc-c++: []
    libffi-devel: []
    openssl-devel: []

container_commands:
  01_install_mysql_connector:
    command: |
      # Try to install mysql-connector-python with MariaDB headers
      pip install mysql-connector-python==8.2.0 --no-cache-dir
    ignoreErrors: true
    
  02_alternative_connector:
    command: |
      # If the above fails, try PyMySQL as alternative
      pip install PyMySQL==1.1.0
    ignoreErrors: true 